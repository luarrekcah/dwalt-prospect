<!DOCTYPE html>
<html lang="pr-br">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <title>Prospect</title>

    <link href="../assets/css/app.css" rel="stylesheet" />
    <link
      href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css"
    />
    <style>
      body {
        height: 100vh;
      }

      #console {
        position: relative;
        background-color: #222;
        color: #eee;
        font-family: "Lucida Console", Monaco, monospace;
        font-size: 14px;
        height: 400px;
        overflow-y: scroll;
        padding: 10px;
      }

      #console h2 {
        font-size: 18px;
        color: #fff;
        margin: 0 0 10px 0;
      }

      #console ul {
        list-style: none;
        list-style-type: none;
        margin: 0;
        padding: 0;
      }

      #console li {
        margin: 0;
        padding: 0;
      }

      #console .error {
        color: #f44336;
      }

      #console .warning {
        color: #ff9800;
      }

      #console .success {
        color: #4caf50;
      }

      #console .info {
        color: #2196f3;
      }

      #console .debug {
        color: #9c27b0;
      }

      .btn-clear-console {
        position: absolute;
        top: 0;
        right: 0;
        padding: 5px;
        border: none;
        background: none;
        cursor: pointer;
        color: #fff;
      }

      .btn-clear-console:hover {
        color: rgb(0, 0, 0);
        background-color: #ddd;
      }

      .btn-clear-console:focus {
        outline: none;
      }

      .btn-clear-console i {
        display: block;
        width: 16px;
        height: 16px;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      /**/
      table.dataTable {
        width: 100%;
        font-family: Arial, sans-serif;
        font-size: 14px;
      }

      .dataTables_length {
        margin-bottom: 20px;
      }

      .dataTables_filter {
        margin-bottom: 20px;
      }

      table.dataTable thead th {
        padding: 8px;
        background-color: #f2f2f2;
        border: 1px solid #ccc;
      }

      table.dataTable tbody td {
        padding: 8px;
        border: 1px solid #ccc;
      }

      table.dataTable tbody tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .dataTables_wrapper .dataTables_paginate .paginate_button {
        padding: 0.5em 1em;
        border-radius: 3px;
        background-color: #e0e0e0;
        color: #333;
        border: none;
        margin-right: 10px;
        margin-left: 10px;
      }

      .dataTables_wrapper .dataTables_paginate .paginate_button.current {
        background-color: #333;
        color: #fff;
        margin-left: 10px;
        margin-right: 10px;
      }

      .dataTables_wrapper .dataTables_filter input {
        padding: 0.5em;
        border-radius: 3px;
        border: 1px solid #ccc;
      }

      .dataTables_wrapper .dataTables_info {
        font-size: 12px;

        margin-top: 20px;
        margin-bottom: 20px;
      }

      .buttonsTable {
        border: none;
        padding: 10px;
        border-radius: 10px;
        color: #3b7ddd;
        margin: 10px;
        transition: all 0.3s ease-out;
      }

      .buttonsTable:hover {
        background-color: #3b7ddd;
        color: #fff;
      }

      .form-group {
        margin-top: 20px;
        margin-bottom: 20px;
      }
    </style>
  </head>

  <body>
    <!--BODY 1-->
    <div id="loginBody">
      <div class="wrapper">
        <div class="main">
          <main class="d-flex w-100">
            <div class="container d-flex flex-column">
              <div class="row vh-100">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100">
                  <div class="d-table-cell align-middle">
                    <div class="text-center mt-4">
                      <h1 class="h2" id="namebot">
                        Prospect bot
                        <span class="badge text-bg-danger">Offline</span>
                      </h1>
                    </div>
                    <div class="card">
                      <div class="card-body">
                        <div class="text-center">
                          <img src="" alt="" srcset="" width="200px" id="qr" />
                          <div id="divInitial">
                            <div
                              class="spinner-border text-primary"
                              role="status"
                            >
                              <span class="visually-hidden">Loading...</span>
                            </div>
                            <p>Aguarde... estamos checando seu acesso.</p>
                          </div>
                          <img src="" alt="" srcset="" width="200px" id="qr" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>
    <!--BODY 2-->
    <div id="loggedBody" style="display: none">
      <div class="wrapper">
        <nav id="sidebar" class="sidebar js-sidebar">
          <div class="sidebar-content js-simplebar">
            <a class="sidebar-brand" href="#">
              <span class="align-middle">Prospect</span>
            </a>

            <ul class="sidebar-nav">
              <li class="sidebar-header">Atalhos</li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('indexPage')"
                >
                  <i class="align-middle" data-feather="sliders"></i>
                  <span class="align-middle">Principal</span>
                </a>
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('SearchPage')"
                >
                  <i class="align-middle" data-feather="user"></i>
                  <span class="align-middle">Pesquisa</span>
                </a>
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('FilesPage')"
                >
                  <i class="align-middle" data-feather="log-in"></i>
                  <span class="align-middle">Arquivos</span>
                </a>
              </li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('ConfigPage')"
                >
                  <i class="align-middle" data-feather="settings"></i>
                  <span class="align-middle">Configuração</span>
                </a>
              </li>
              <li class="sidebar-header">Funções adicionais</li>
              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('BankNumbers')"
                >
                  <i class="align-middle" data-feather="database"></i>
                  <span class="align-middle">Banco</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('Responses')"
                >
                  <i class="align-middle" data-feather="message-square"></i>
                  <span class="align-middle">Respostas</span>
                </a>
              </li>
              <li class="sidebar-header">Outros</li>

              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  href="#"
                  onclick="swithScreen('Console')"
                >
                  <i class="align-middle" data-feather="monitor"></i>
                  <span class="align-middle">Console</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <div class="main">
          <nav class="navbar navbar-expand navbar-light navbar-bg">
            <a class="sidebar-toggle js-sidebar-toggle">
              <i class="hamburger align-self-center"></i>
            </a>
          </nav>

          <div id="indexPage">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">Dashboard de<strong> Análises</strong></h1>

                <div class="row">
                  <div class="col-xl-6 col-xxl-5 d-flex">
                    <div class="w-100">
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="card">
                            <div class="card-body">
                              <div class="row">
                                <div class="col mt-0">
                                  <h5 class="card-title">Números no banco</h5>
                                </div>

                                <div class="col-auto">
                                  <div class="stat text-primary">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      width="24"
                                      height="24"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="feather feather-users align-middle"
                                    >
                                      <path
                                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                                      ></path>
                                      <circle cx="9" cy="7" r="4"></circle>
                                      <path
                                        d="M23 21v-2a4 4 0 0 0-3-3.87"
                                      ></path>
                                      <path
                                        d="M16 3.13a4 4 0 0 1 0 7.75"
                                      ></path>
                                    </svg>
                                  </div>
                                </div>
                              </div>
                              <h1 class="mt-1 mb-3" id="numbersSaved">0</h1>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-body">
                              <div class="row">
                                <div class="col mt-0">
                                  <h5 class="card-title">Meus chats</h5>
                                </div>

                                <div class="col-auto">
                                  <div class="stat text-primary">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      width="24"
                                      height="24"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="feather feather-users align-middle"
                                    >
                                      <path
                                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                                      ></path>
                                      <circle cx="9" cy="7" r="4"></circle>
                                      <path
                                        d="M23 21v-2a4 4 0 0 0-3-3.87"
                                      ></path>
                                      <path
                                        d="M16 3.13a4 4 0 0 1 0 7.75"
                                      ></path>
                                    </svg>
                                  </div>
                                </div>
                              </div>
                              <h1 class="mt-1 mb-3" id="myChats">0</h1>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-6">
                          <div class="card">
                            <div class="card-body">
                              <div class="row">
                                <div class="col mt-0">
                                  <h5 class="card-title">
                                    Envios nessa sessão
                                  </h5>
                                </div>

                                <div class="col-auto">
                                  <div class="stat text-primary">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      width="24"
                                      height="24"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="feather feather-users align-middle"
                                    >
                                      <path
                                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                                      ></path>
                                      <circle cx="9" cy="7" r="4"></circle>
                                      <path
                                        d="M23 21v-2a4 4 0 0 0-3-3.87"
                                      ></path>
                                      <path
                                        d="M16 3.13a4 4 0 0 1 0 7.75"
                                      ></path>
                                    </svg>
                                  </div>
                                </div>
                              </div>
                              <h1 class="mt-1 mb-3" id="sendCount">0</h1>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-body">
                              <p>
                                Status: <b><p id="statusShow"></p></b>
                              </p>
                              <div class="mb-3">
                                <label for="progressBar" class="form-label"
                                  >Progresso</label
                                >
                                <input
                                  type="range"
                                  onchange="switchTime()"
                                  class="form-range"
                                  min="0"
                                  value="0"
                                  max="3"
                                  id="progressBar"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-xl-6 col-xxl-7">
                    <div class="card flex-fill w-100">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Uso do sistema</h5>
                      </div>
                      <div class="card-body py-3">
                        <div class="chart chart-sm">
                          <div class="chartjs-size-monitor">
                            <div class="chartjs-size-monitor-expand">
                              <div class=""></div>
                            </div>
                            <div class="chartjs-size-monitor-shrink">
                              <div class=""></div>
                            </div>
                          </div>
                          <canvas
                            id="chartjs-dashboard-line"
                            style="display: block; width: 489px; height: 252px"
                            width="489"
                            height="252"
                            class="chartjs-render-monitor"
                          ></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <h1 class="h3 mb-3">Gatilhos dos<strong> Comandos</strong></h1>

                <div class="row">
                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Comando de teste</h5>
                      </div>
                      <div class="card-body">
                        <input
                          type="text"
                          id="testNumber"
                          placeholder="Número de teste"
                          class="form-control"
                        />
                        <hr />
                        <button
                          class="btn btn-primary btn-lg"
                          style="width: 100%"
                          id="sendTest"
                        >
                          Prospectar teste
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Comando prospecção</h5>
                        <p>
                          Esse gatilho dispara as mensagens para os números com
                          os dados informados ou você pode optar por cancelar o
                          disparo, o bot vai salvar todos os números no banco
                          automaticamente.
                        </p>
                      </div>
                      <div class="card-body">
                        <button
                          class="btn btn-primary btn-lg"
                          style="width: 100%"
                          id="sendProspect"
                        >
                          Prospectar
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <h1 class="h3 mb-3">Dados da<strong> API</strong></h1>

                <div class="row">
                  <div
                    class="col-12 col-md-6 col-xxl-3 d-flex order-2 order-xxl-3"
                  >
                    <div class="card flex-fill w-100">
                      <div class="card-header">
                        <h5 class="card-title mb-0">
                          Uso (atualiza a cada 60s)
                        </h5>
                      </div>
                      <div class="card-body d-flex" id="useApiWarn"></div>
                      <div class="card-body d-flex" id="useApiBody">
                        <div class="align-self-center w-100">
                          <div class="py-3">
                            <div class="chart chart-xs">
                              <div class="chartjs-size-monitor">
                                <div class="chartjs-size-monitor-expand">
                                  <div class=""></div>
                                </div>
                                <div class="chartjs-size-monitor-shrink">
                                  <div class=""></div>
                                </div>
                              </div>
                              <canvas
                                id="chartjs-dashboard-pie"
                                width="394"
                                height="200"
                                style="
                                  display: block;
                                  width: 394px;
                                  height: 200px;
                                "
                                class="chartjs-render-monitor"
                              ></canvas>
                            </div>
                          </div>

                          <table class="table mb-0">
                            <tbody>
                              <tr>
                                <td>Usado</td>
                                <td class="text-end" id="usedApi">
                                  Carregando... 60s
                                </td>
                              </tr>
                              <tr>
                                <td>Total</td>
                                <td class="text-end" id="limitApi">
                                  Carregando... 60s
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <div id="SearchPage" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">
                  Configuração de<strong> Pesquisa</strong>
                </h1>
                <div class="row">
                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Texto para enviar</h5>
                      </div>
                      <div class="card-body">
                        <textarea
                          class="form-control"
                          id="text"
                          rows="2"
                        ></textarea>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Onde?</h5>
                      </div>
                      <div class="card-body">
                        <input type="text" id="where" class="form-control" />
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">
                          Para que tipo de empresa?
                        </h5>
                      </div>
                      <div class="card-body">
                        <input
                          type="text"
                          id="businesstype"
                          class="form-control"
                        />
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-body">
                        <button
                          class="btn btn-primary btn-lg"
                          style="width: 100%"
                          id="infoSave"
                        >
                          Salvar
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <div id="FilesPage" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">
                  Configuração de<strong> Arquivos</strong>
                </h1>

                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <ul
                          class="list-group"
                          id="list"
                          style="margin-top: 20px"
                        ></ul>
                        <div class="mb-3">
                          <label for="formFile" class="form-label"
                            >Adicione os arquivos de envio.</label
                          >
                          <input
                            class="form-control"
                            multiple
                            type="file"
                            id="formFile"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <div id="ConfigPage" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">
                  Configuração do<strong> Sistema</strong>
                </h1>
                <div class="row">
                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Chave da API</h5>
                      </div>
                      <div class="card-body">
                        <input type="text" id="apikey" class="form-control" />
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Intervalo de envio</h5>
                      </div>
                      <div class="card-body">
                        <div class="mb-3">
                          <label for="sendTime" class="form-label"
                            >Intervalo de envio
                            <b id="showTime"></b> segundos</label
                          >
                          <input
                            type="range"
                            onchange="switchTime()"
                            class="form-range"
                            min="3"
                            max="15"
                            id="sendTime"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-lg-6">
                    <div class="card">
                      <div class="card-header">
                        <h5 class="card-title mb-0">Checkboxes</h5>
                      </div>
                      <div class="card-body">
                        <div>
                          <label class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              value=""
                              id="blockOldNumbers"
                            />
                            <span class="form-check-label">
                              Bloquear números repetidos
                            </span>
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="card">
                      <div class="card-body">
                        <button
                          class="btn btn-primary btn-lg"
                          style="width: 100%"
                          id="configSave"
                        >
                          Salvar
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <!--BANK-->
          <div id="BankNumbers" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">Banco de<strong> Números</strong></h1>
                <div id="ex1" class="modal">
                  <h1>Adicione uma empresa nova</h1>
                  <hr />
                  <form id="addBusiness">
                    <label>Grupo</label>
                    <input type="text" id="grupo" class="form-control" />
                    <label>Local</label>
                    <input type="text" id="local" class="form-control" />
                    <label>Nome da Empresa</label>
                    <input type="text" id="nome" class="form-control" />
                    <label>Número da empresa</label>
                    <input
                      type="text"
                      id="numero"
                      placeholder="+55 XX XXXXX-XXXX"
                      class="form-control"
                    />
                    <label>Tipo</label>
                    <input type="text" id="tipo" class="form-control" />
                    <label>Data de adesão</label>
                    <input type="date" id="data" class="form-control" />
                    <hr />
                    <button
                      type="submit"
                      class="btn btn-primary btn-lg"
                      style="width: 100%"
                    >
                      Adicionar
                    </button>
                  </form>
                </div>
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <p>
                          Caso queira enviar para um grupo específico, pesquise
                          algum dado em comum dos números e clique em
                          "prospectar todos abaixo".
                        </p>
                        <b>Reinicie o bot caso a tabela não atualize.</b>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <div
                          style="
                            display: flex;
                            flex-direction: row;
                            justify-content: space-between;
                            margin-bottom: 40px;
                          "
                        >
                          <button
                            class="btn btn-primary btn-lg"
                            id="prospectAll"
                          >
                            <i class="align-middle" data-feather="send"></i>
                            Prospectar todos abaixo
                          </button>
                          <button class="btn btn-danger btn-lg" id="deleteAll">
                            <i class="align-middle" data-feather="trash"></i>
                            Deletar todos abaixo
                          </button>
                          <button
                            class="btn btn-success btn-lg"
                            id="exportExcel"
                          >
                            <i class="align-middle" data-feather="database"></i>
                            Exportar tabela
                          </button>
                          <a
                            class="btn btn-primary btn-lg"
                            id="addBusiness"
                            href="#ex1"
                            rel="modal:open"
                          >
                            <i class="align-middle" data-feather="plus"></i>
                            Adicionar empresa</a
                          >
                        </div>
                        <hr />
                        <br />
                        <table
                          id="tablenumbers"
                          class="display"
                          style="width: 100%"
                        >
                          <thead>
                            <tr>
                              <th>Grupo</th>
                              <th>Local</th>
                              <th>Nome</th>
                              <th>Número</th>
                              <th>Data</th>
                              <th>Botões</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td>
                                <button onclick="sendMessageTo(number)">
                                  <i
                                    class="align-middle"
                                    data-feather="send"
                                  ></i>
                                </button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <!--CONSOLE-->
          <div id="Console" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">Avançado -<strong> Console</strong></h1>

                <div class="row">
                  <div id="console">
                    <ul id="console-list"></ul>
                    <button onclick="cleanConsole()" class="btn-clear-console">
                      <i class="align-middle" data-feather="trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            </main>
          </div>
          <!--RESPONSE-->
          <div id="Responses" style="display: none">
            <main class="content">
              <div class="container-fluid p-0">
                <h1 class="h3 mb-3">Automação -<strong> Respostas</strong></h1>
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <p>
                          Crie respostas automáticas para mensagens de contatos.
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <div class="row">
                          <div class="col">
                            <button
                              class="btn btn-primary"
                              style="margin-bottom: 20px; width: 100%"
                              id="addBtn"
                            >
                              Adicionar Resposta Simples
                            </button>
                          </div>
                          <div class="col">
                            <button
                              class="btn btn-success"
                              style="margin-bottom: 20px;width: 100%"
                              id="saveQuestions"
                            >
                              Aplicar
                            </button>
                          </div>

                          <div class="col">
                            <button
                              class="btn btn-danger"
                              style="margin-bottom: 20px; width: 100%"
                              id="deleteAllQuestions"
                            >
                              Apagar tudo
                            </button>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body">
                        <div id="questionsDiv">
                          <div id="question-list"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <script>
                  let questionCounter = 0;
                  let fileCounter = 0;

                  const addQuestion = () => {
                    questionCounter++;
                    const questionList =
                      document.getElementById("question-list");
                    const questionDiv = document.createElement("div");
                    questionDiv.classList.add("card", "mb-3");

                    const questionCardBody = document.createElement("div");
                    questionCardBody.classList.add("card-body");

                    const questionTitle = document.createElement("h5");
                    questionTitle.classList.add("card-title");
                    questionTitle.textContent = `Mensagem`;

                    const questionFormGroup1 = document.createElement("div");
                    questionFormGroup1.classList.add("form-group");

                    const questionLabel1 = document.createElement("label");
                    questionLabel1.setAttribute(
                      "for",
                      `question${questionCounter}`
                    );
                    questionLabel1.textContent = "Mensagem:";

                    const questionInput = document.createElement("input");
                    questionInput.setAttribute("type", "text");
                    questionInput.classList.add("form-control");
                    questionInput.setAttribute(
                      "id",
                      `question${questionCounter}`
                    );
                    questionInput.setAttribute(
                      "name",
                      `question${questionCounter}`
                    );
                    questionInput.setAttribute("required", "");

                    const questionFormGroup2 = document.createElement("div");
                    questionFormGroup2.classList.add("form-group");

                    const questionLabel2 = document.createElement("label");
                    questionLabel2.setAttribute(
                      "for",
                      `answer${questionCounter}`
                    );
                    questionLabel2.textContent = "Resposta:";

                    const answerInput = document.createElement("input");
                    answerInput.setAttribute("type", "text");
                    answerInput.classList.add("form-control");
                    answerInput.setAttribute("id", `answer${questionCounter}`);
                    answerInput.setAttribute(
                      "name",
                      `answer${questionCounter}`
                    );
                    answerInput.setAttribute("required", "");

                    const fileFormGroup = document.createElement("div");
                    fileFormGroup.classList.add("form-group");

                    const fileLabel = document.createElement("label");
                    fileLabel.setAttribute("for", `file${questionCounter}`);
                    fileLabel.textContent = "Arquivo:";

                    const fileInput = document.createElement("input");
                    fileInput.setAttribute("type", "file");
                    fileInput.classList.add("form-control-file");
                    fileInput.setAttribute("id", `file${questionCounter}`);
                    fileInput.setAttribute("name", `file${questionCounter}`);
                    fileInput.setAttribute("multiple", `true`);

                    const removeQuestionButton =
                      document.createElement("button");
                    removeQuestionButton.classList.add("btn", "btn-danger");
                    removeQuestionButton.textContent = "Apagar";
                    removeQuestionButton.setAttribute(
                      "onclick",
                      `removeQuestion(${questionCounter})`
                    );

                    questionFormGroup1.appendChild(questionLabel1);
                    questionFormGroup1.appendChild(questionInput);
                    questionCardBody.appendChild(questionTitle);
                    questionCardBody.appendChild(questionFormGroup1);
                    questionFormGroup2.appendChild(questionLabel2);
                    questionFormGroup2.appendChild(answerInput);
                    questionCardBody.appendChild(questionFormGroup2);
                    fileFormGroup.appendChild(fileLabel);
                    fileFormGroup.appendChild(fileInput);
                    questionCardBody.appendChild(fileFormGroup);
                    questionCardBody.appendChild(removeQuestionButton);
                    questionDiv.appendChild(questionCardBody);
                    questionList.appendChild(questionDiv);
                  };

                  const removeQuestion = (questionNumber) => {
                    const questionDiv = document
                      .getElementById(`question${questionNumber}`)
                      .closest(".card.mb-3");
                    questionDiv.remove();
                    questionCounter--;
                  };

                  const readFileAsDataURL = (file) => {
                    return new Promise((resolve, reject) => {
                      const reader = new FileReader();
                      reader.onload = () => resolve(reader.result);
                      reader.onerror = reject;
                      reader.readAsDataURL(file);
                    });
                  };

                  const getQuestionsAndAnswers = async () => {
                    const questions = [];
                    const questionElements =
                      document.querySelectorAll(".card.mb-3");
                    for (let i = 0; i < questionElements.length; i++) {
                      const questionElement = questionElements[i];
                      const questionTitle = questionElement.querySelector(
                        "input[id^='question']"
                      ).value;
                      const answerInput = questionElement.querySelector(
                        "input[id^='answer']"
                      );
                      const answer = answerInput.value;
                      const files = [];
                      const fileInputs =
                        questionElement.querySelectorAll("input[type='file']");
                      for (let j = 0; j < fileInputs.length; j++) {
                        const fileInput = fileInputs[j];
                        for (let k = 0; k < fileInput.files.length; k++) {
                          const file = fileInput.files[k];
                          const base64 = await readFileAsDataURL(file);
                          files.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            base64,
                          });
                        }
                      }
                      questions.push({
                        type: "text",
                        question: questionTitle,
                        answer: answer,
                        files: files,
                      });
                    }
                    return questions
                  };

                  document
                    .getElementById("addBtn")
                    .addEventListener("click", addQuestion);
                </script>
              </div>
            </main>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="../assets/js/app.js"></script>
  <script src="../assets/js/index.js"></script>
  <script>
    const $ = require("jQuery");
    const jQuery = require("jQuery");
  </script>
  <script
    type="text/javascript"
    src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"
  ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
  <script>
    $(document).ready(function () {
      $("#tablenumbers").DataTable({
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.11.5/i18n/pt-BR.json",
        },
        paging: true,
        ordering: true,
        info: true,
      });
    });
  </script>
</html>
